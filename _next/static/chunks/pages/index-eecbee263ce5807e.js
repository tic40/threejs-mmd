(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(264)}])},264:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return z}});var r,i,o,a,s,u,c,l,d,h,m,p,f,g,w,y,_=n(7568),v=n(414),b=n(5893),x=n(7294),k=n(9477),j=n(2274),C=n(5414),M=n.n(C),S=n(9008),E=n.n(S),N=function(t){var e=t.title,n=t.description;return(0,b.jsxs)(E(),{children:[(0,b.jsx)("title",{children:e}),(0,b.jsx)("meta",{property:"description",content:n}),(0,b.jsx)("meta",{property:"og:title",content:e}),(0,b.jsx)("meta",{property:"og:description",content:n}),(0,b.jsx)("meta",{property:"og:image",content:"https://avatars.githubusercontent.com/u/739402?v=4?s=400"}),(0,b.jsx)("meta",{name:"twitter:card",content:"summary"}),(0,b.jsx)("link",{rel:"icon",href:"".concat("/threejs-mmd/","/favicon.ico")})]})},P=n(2125),Z=n(410),F=[{name:"lat_miku",path:"./models/lat_miku/Lat\u5f0f\u30df\u30afVer2.31_White.pmd",height:1.58,emissiveMag:1.5},{name:"alicia",path:"./models/alicia/Alicia_solid.pmx",height:1.48,emissiveMag:.1}],A=[{name:"bonyari",path:"./motions/bonyari.vmd"},{name:"gokigen",path:"./motions/gokigen.vmd"},{name:"atamawokaku",path:"./motions/atamawokaku.vmd"},{name:"nekomimi_switch",path:"./motions/nekomimi_lat.vmd"},{name:"schrodingeiger_no_koneko",path:"./motions/Schrodingeiger_no_Koneko1.vmd"}],O=n(9365),z=function(){var t=function(){for(var t;null===(t=z.current)||void 0===t?void 0:t.firstChild;)z.current.removeChild(z.current.firstChild)},e=function(t){return j.d9(t)},n=function(){return F[w]},C=function(){return A[y]},S=function(){var t;u=new k.xsS,c=new k.SUY,l=new P._,d=new Z.k,(s=new k.CP7).setPixelRatio(window.devicePixelRatio),s.setSize(o,a),s.setClearColor(16777215,1),s.shadowMap.enabled=!0,null===(t=z.current)||void 0===t||t.appendChild(s.domElement),h=new k.cPb(45,o/a,.1,100),u.add(new k.Mig(16777215,.6)),(p=new k.Ox3(16769721,.4)).position.set(2,4,2),p.castShadow=!0,u.add(p),(m=new k.Kj0(new k._12(10,10,1,1),new k.Tn7({opacity:.2}))).rotation.x=-Math.PI/2,m.receiveShadow=!0,u.add(m),u.add(new k.VLJ(10,20,0,10066329)),u.add(new k.y8_(10)),(f=new O.z(h,s.domElement)).enableDamping=!0},E=function(){var t=function(){l.update(c.getDelta()),f.update(),s.render(u,h),r=requestAnimationFrame(t)};t()},z=(0,x.useRef)(null),R=(0,x.useState)(!1),T=R[0],D=R[1];function H(){return K.apply(this,arguments)}function K(){return(K=(0,_.Z)((function(){return(0,v.__generator)(this,(function(e){switch(e.label){case 0:D(!0),t(),e.label=1;case 1:return e.trys.push([1,5,6,7]),S(),[4,M()()];case 2:return e.sent(),[4,L()];case 3:return e.sent(),[4,W()];case 4:return e.sent(),[3,7];case 5:return e.sent(),alert("error occurred!"),[2];case 6:return D(!1),[7];case 7:return E(),[2]}}))}))).apply(this,arguments)}function L(){return V.apply(this,arguments)}function V(){return(V=(0,_.Z)((function(){return(0,v.__generator)(this,(function(t){return[2,new Promise((function(t,e){var n=F[w];if(i[n.name])return t();d.load(n.path,(function(e){e.castShadow=!0;var r=(new k.ZzF).setFromObject(e);e.scale.multiplyScalar(n.height/r.max.y),e.material.forEach((function(t){t.emissive.multiplyScalar(n.emissiveMag)})),i[n.name]=e,t()}),(function(t){return console.info("[model] ".concat(t.loaded/t.total*100,"% loaded"))}),(function(t){return e(t)}))}))]}))}))).apply(this,arguments)}function W(){return X.apply(this,arguments)}function X(){return(X=(0,_.Z)((function(){return(0,v.__generator)(this,(function(t){return[2,new Promise((function(t,r){var o=n(),a=C();g=e(i[o.name]),d.loadAnimation(a.path,g,(function(e){if(l.meshes.length)return t();try{l.add(g,{animation:e,physics:!0})}catch(n){return console.error(n),void r(n)}u.add(g),f.target.set(0,o.height/2,0),f.object.position.set(0,.55*o.height,1.9*o.height),t()}),(function(t){return console.info("[motion] ".concat(t.loaded/t.total*100,"% loaded"))}),(function(t){return r(t)}))}))]}))}))).apply(this,arguments)}function q(){return(q=(0,_.Z)((function(){return(0,v.__generator)(this,(function(t){return w=(w+1)%F.length,I(),[2]}))}))).apply(this,arguments)}function G(){return(G=(0,_.Z)((function(){return(0,v.__generator)(this,(function(t){return y=(y+1)%A.length,I(),[2]}))}))).apply(this,arguments)}function I(){return J.apply(this,arguments)}function J(){return(J=(0,_.Z)((function(){return(0,v.__generator)(this,(function(t){switch(t.label){case 0:D(!0),l.remove(g),u.remove(g),cancelAnimationFrame(r),t.label=1;case 1:return t.trys.push([1,4,5,6]),[4,L()];case 2:return t.sent(),[4,W()];case 3:return t.sent(),[3,6];case 4:return t.sent(),H(),[2];case 5:return D(!1),[7];case 6:return E(),[2]}}))}))).apply(this,arguments)}return(0,x.useEffect)((function(){var t;o=window.innerWidth,a=window.innerHeight,i||(i={}),w||(w=0),y||(t=A.length,y=Math.floor(Math.random()*t)),H()}),[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(N,{title:"tic40/threejs-mmd",description:"tic40/threejs-mmd"}),(0,b.jsx)("div",{className:"absolute top-1/2 left-1/2 animate-ping h-5 w-5 bg-gray-600 rounded-full",role:"status",style:{display:T?"block":"none"}}),(0,b.jsx)("button",{onClick:function(){return q.apply(this,arguments)},className:"absolute top-2 left-2 bg-transparent hover:text-gray-500 text-gray-700 py-1 px-1 border rounded",disabled:T,children:"Model >>"}),(0,b.jsx)("button",{onClick:function(){return G.apply(this,arguments)},className:"absolute top-2 left-24 bg-transparent hover:text-gray-500 text-gray-700 py-1 px-1 border rounded",disabled:T,children:"Motion >>"}),(0,b.jsx)("a",{className:"absolute bottom-2 left-2 bg-transparent text-gray-700 py-1 px-1 noborder rounded",href:"https://github.com/tic40/threejs-mmd",target:"_blank",rel:"noreferrer",children:"GitHub"}),(0,b.jsx)("div",{ref:z})]})}},1756:function(){}},function(t){t.O(0,[737,34,92,774,888,179],(function(){return e=8312,t(t.s=e);var e}));var e=t.O();_N_E=e}]);