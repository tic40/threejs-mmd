(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1906)}])},1906:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var a,r,i,o,s,c,m,d,u,l,p,h,f,v,w,g,x=n(4051),_=n.n(x),y=n(5893),b=n(7294),k=n(9477),j=n(2274),C=n(5414),P=n.n(C),M=n(9008),S=n.n(M),E=function(e){var t=e.title,n=e.description;return(0,y.jsxs)(S(),{children:[(0,y.jsx)("title",{children:t}),(0,y.jsx)("meta",{property:"description",content:n}),(0,y.jsx)("meta",{property:"og:title",content:t}),(0,y.jsx)("meta",{property:"og:description",content:n}),(0,y.jsx)("meta",{property:"og:image",content:"https://avatars.githubusercontent.com/u/739402?v=4?s=400"}),(0,y.jsx)("meta",{name:"twitter:card",content:"summary"}),(0,y.jsx)("link",{rel:"icon",href:"".concat("/threejs-mmd/","/favicon.ico")})]})},N=n(2125),F=n(410),A=[{name:"lat_miku",path:"./models/lat_miku/Lat\u5f0f\u30df\u30afVer2.31_White.pmd",height:1.58,emissiveMag:1.5},{name:"alicia",path:"./models/alicia/mmd/Alicia_solid.pmx",height:1.48,emissiveMag:.1}],O=[{name:"step1",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d71.vmd"},{name:"step2",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d710.vmd"},{name:"step3",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d717.vmd"},{name:"step4",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d719.vmd"},{name:"step5",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d723.vmd"},{name:"step6",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d720.vmd"},{name:"step7",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d722.vmd"},{name:"step8",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d728.vmd"},{name:"step9",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d729.vmd"},{name:"step10",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d731.vmd"},{name:"step11",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d736.vmd"},{name:"step12",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d737.vmd"},{name:"step13",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d77.vmd"},{name:"step14",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d78.vmd"},{name:"dance1",path:"./motions/nekomimi_switch/nekomimi_lat.vmd"},{name:"dance2",path:"./motions/schrodingeiger_no_koneko/Schrodingeiger_no_Koneko1.vmd"}],z=n(9365);function R(e,t,n,a,r,i,o){try{var s=e[i](o),c=s.value}catch(m){return void n(m)}s.done?t(c):Promise.resolve(c).then(a,r)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){R(i,a,r,o,s,"next",e)}function s(e){R(i,a,r,o,s,"throw",e)}o(void 0)}))}}var D=function(){var e=function(e){return j.d9(e)},t=function(){return A[w]},n=function(){return O[g]},x=function(){var e,t;!function(){for(var e;null===(e=M.current)||void 0===e?void 0:e.firstChild;)M.current.removeChild(M.current.firstChild)}(),i=window.innerWidth,o=window.innerHeight,r={},w=0,t=O.length,g=Math.floor(Math.random()*t),c=new k.xsS,m=new k.SUY,d=new N._,u=new F.k,(s=new k.CP7).setPixelRatio(window.devicePixelRatio),s.setSize(i,o),s.setClearColor(16777215,1),s.shadowMap.enabled=!0,null===(e=M.current)||void 0===e||e.appendChild(s.domElement),l=new k.cPb(45,i/o,.1,100),c.add(new k.Mig(16777215,.6)),(h=new k.Ox3(16769721,.4)).position.set(2,4,2),h.castShadow=!0,c.add(h),(p=new k.Kj0(new k._12(10,10,1,1),new k.Tn7({opacity:.2}))).rotation.x=-Math.PI/2,p.receiveShadow=!0,c.add(p),c.add(new k.VLJ(10,20,0,10066329)),c.add(new k.y8_(10)),(f=new z.z(l,s.domElement)).enableDamping=!0},C=function(){var e=function(){d.update(m.getDelta()),f.update(),s.render(c,l),a=requestAnimationFrame(e)};e()},M=(0,b.useRef)(null),S=(0,b.useState)(!1),R=S[0],D=S[1];function H(){return K.apply(this,arguments)}function K(){return(K=T(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=A[w];if(r[n.name])return e();u.load(n.path,(function(t){t.castShadow=!0;var a=(new k.ZzF).setFromObject(t);t.scale.multiplyScalar(n.height/a.max.y),t.material.forEach((function(e){e.emissive.multiplyScalar(n.emissiveMag)})),r[n.name]=t,e()}),(function(e){return console.info(e.loaded/e.total*100+"% loaded")}),(function(e){return t(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return V.apply(this,arguments)}function V(){return(V=T(_().mark((function a(){return _().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,i){var o=t(),s=n();v=e(r[o.name]),u.loadAnimation(s.path,v,(function(e){if(d.meshes.length)return a();d.add(v,{animation:e,physics:!0}),c.add(v),f.target.set(0,o.height/2,0),f.object.position.set(0,.55*o.height,1.9*o.height),a()}),(function(e){return console.info(e.loaded/e.total*100+"% loaded")}),(function(e){return i(e)}))})));case 1:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function W(){return(W=T(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(!0),w=(w+1)%A.length,q();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=T(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(!0),g=(g+1)%O.length,q();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return G.apply(this,arguments)}function G(){return(G=T(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.remove(v),c.remove(v),cancelAnimationFrame(a),e.next=5,H();case 5:return e.next=7,L();case 7:C(),D(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,b.useEffect)((function(){D(!0);var e=function(){var e=T(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(),e.next=3,P()();case 3:return e.next=5,H();case 5:return e.next=7,L();case 7:C(),D(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(E,{title:"tic40/threejs-mmd",description:"tic40/threejs-mmd"}),(0,y.jsx)("div",{className:"absolute top-1/2 left-1/2 animate-ping h-5 w-5 bg-gray-600 rounded-full",role:"status",style:{display:R?"block":"none"}}),(0,y.jsx)("button",{onClick:function(){return W.apply(this,arguments)},className:"absolute top-2 left-2 bg-transparent text-gray-700 py-1 px-1 border border-gray-500 rounded",disabled:R,children:"Model >>"}),(0,y.jsx)("button",{onClick:function(){return X.apply(this,arguments)},className:"absolute top-2 left-24 bg-transparent text-gray-700 py-1 px-1 border border-gray-500 rounded",disabled:R,children:"Motion >>"}),(0,y.jsx)("a",{className:"absolute bottom-2 left-2 bg-transparent text-gray-700 py-1 px-1 noborder rounded",href:"https://github.com/tic40/threejs-mmd",target:"_blank",rel:"noreferrer",children:"GitHub"}),(0,y.jsx)("div",{ref:M})]})}},1756:function(){}},function(e){e.O(0,[737,34,472,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);