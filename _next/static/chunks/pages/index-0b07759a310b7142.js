(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1906)}])},1906:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var a,i,o,r,m,s,d,c,l,u,p,h,f,v,g,_,w=n(4051),b=n.n(w),x=n(5893),y=n(7294),j=n(9477),k=n(2274),C=n(5414),M=n.n(C),S=n(9008),E=n.n(S),N=function(e){var t=e.title,n=e.description;return(0,x.jsxs)(E(),{children:[(0,x.jsx)("title",{children:t}),(0,x.jsx)("meta",{property:"description",content:n}),(0,x.jsx)("meta",{property:"og:title",content:t}),(0,x.jsx)("meta",{property:"og:description",content:n}),(0,x.jsx)("meta",{property:"og:image",content:"https://avatars.githubusercontent.com/u/739402?v=4?s=400"}),(0,x.jsx)("meta",{name:"twitter:card",content:"summary"}),(0,x.jsx)("link",{rel:"icon",href:"".concat("/threejs-mmd/","/favicon.ico")})]})},P=n(2125),A=n(410),F=[{name:"lat_miku",path:"./models/lat_miku/Lat\u5f0f\u30df\u30afVer2.31_White.pmd",height:1.58,emissiveMag:1.5},{name:"alicia",path:"./models/alicia/mmd/Alicia_solid.pmx",height:1.48,emissiveMag:.1}],O=[{name:"step1",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d71.vmd"},{name:"step2",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d710.vmd"},{name:"step3",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d717.vmd"},{name:"step4",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d719.vmd"},{name:"step5",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d723.vmd"},{name:"step6",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d720.vmd"},{name:"step7",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d722.vmd"},{name:"step8",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d728.vmd"},{name:"step9",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d729.vmd"},{name:"step10",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d731.vmd"},{name:"step11",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d736.vmd"},{name:"step12",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d737.vmd"},{name:"step13",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d77.vmd"},{name:"step14",path:"./models/alicia/mmd_motion/2\u5206\u30eb\u30fc\u30d7\u30b9\u30c6\u30c3\u30d78.vmd"},{name:"dance1",path:"./motions/nekomimi_switch/nekomimi_lat.vmd"},{name:"dance2",path:"./motions/schrodingeiger_no_koneko/Schrodingeiger_no_Koneko1.vmd"}],T=n(9365);function z(e,t,n,a,i,o,r){try{var m=e[o](r),s=m.value}catch(d){return void n(d)}m.done?t(s):Promise.resolve(s).then(a,i)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){z(o,a,i,r,m,"next",e)}function m(e){z(o,a,i,r,m,"throw",e)}r(void 0)}))}}var D=function(){var e=function(){var e,t;!function(){for(var e;null===(e=C.current)||void 0===e?void 0:e.firstChild;)C.current.removeChild(C.current.firstChild)}(),o=window.innerWidth,r=window.innerHeight,i={},g=0,t=O.length,_=Math.floor(Math.random()*t),s=new j.xsS,d=new j.SUY,c=new P._,l=new A.k,(m=new j.CP7).setPixelRatio(window.devicePixelRatio),m.setSize(o,r),m.setClearColor(16777215,1),m.shadowMap.enabled=!0,null===(e=C.current)||void 0===e||e.appendChild(m.domElement),u=new j.cPb(45,o/r,.1,100),s.add(new j.Mig(16777215,.6)),(h=new j.Ox3(16769721,.4)).position.set(2,4,2),h.castShadow=!0,s.add(h),(p=new j.Kj0(new j._12(10,10,1,1),new j.Tn7({opacity:.2}))).rotation.x=-Math.PI/2,p.receiveShadow=!0,s.add(p),s.add(new j.VLJ(10,20,0,10066329)),s.add(new j.y8_(10)),(f=new T.z(u,m.domElement)).enableDamping=!0},t=function(){var e,t=F[g],a=O[_];e=i[t.name],v=k.d9(e),l.loadAnimation(a.path,v,(function(e){c.meshes.length||(c.add(v,{animation:e,physics:!0}),s.add(v),f.target.set(0,t.height/2,0),f.object.position.set(0,.55*t.height,1.9*t.height),setTimeout((function(){z(!1),n()}),500))}),(function(e){return console.info(e.loaded/e.total*100+"% loaded")}),(function(e){return console.error(e)}))},n=function(){var e=function(){c.update(d.getDelta()),f.update(),m.render(s,u),a=requestAnimationFrame(e)};e()},w=function(){c.remove(v),s.remove(v),cancelAnimationFrame(a)},C=(0,y.useRef)(null),S=(0,y.useState)(!1),E=S[0],z=S[1];function D(e){return H.apply(this,arguments)}function H(){return(H=R(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i[(n=F[g]).name]){e.next=4;break}return t(),e.abrupt("return");case 4:l.load(n.path,(function(e){e.castShadow=!0;var a=(new j.ZzF).setFromObject(e);e.scale.multiplyScalar(n.height/a.max.y),Array.isArray(e.material)&&e.material.forEach((function(e){return e.emissive.multiplyScalar(n.emissiveMag)})),i[n.name]=e,t()}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,y.useEffect)((function(){z(!0),e(),M()().then((function(){D((function(){t()}))}))}),[]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(N,{title:"tic40/threejs-mmd",description:"tic40/threejs-mmd"}),(0,x.jsx)("div",{className:"absolute top-1/2 left-1/2 animate-ping h-5 w-5 bg-gray-600 rounded-full",role:"status",style:{display:E?"block":"none"}}),(0,x.jsx)("button",{onClick:function(){z(!0),g=(g+1)%F.length,w(),D((function(){t()})),console.log(i)},className:"absolute top-2 left-2 bg-transparent text-gray-700 py-1 px-1 border border-gray-500 rounded",disabled:E,children:"Model >>"}),(0,x.jsx)("button",{onClick:function(){z(!0),_=(_+1)%O.length,w(),t()},className:"absolute top-2 left-24 bg-transparent text-gray-700 py-1 px-1 border border-gray-500 rounded",disabled:E,children:"Motion >>"}),(0,x.jsx)("a",{className:"absolute bottom-2 left-2 bg-transparent text-gray-700 py-1 px-1 noborder rounded",href:"https://github.com/tic40/threejs-mmd",target:"_blank",rel:"noreferrer",children:"GitHub"}),(0,x.jsx)("div",{ref:C})]})}},1756:function(){}},function(e){e.O(0,[737,34,472,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);